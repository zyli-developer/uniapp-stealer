"use strict";const e=require("../../common/vendor.js");if(!Array){e.resolveComponent("uni-easyinput")()}Math;const o={__name:"index",setup(o){e.useStore();const l=e.ref();e.onLoad((()=>{l.value=e.wx$1.createInterstitialAd({adUnitId:"advertising"}),l.value&&l.value.show()})),e.onUnload((()=>{l.value.destory()}));const a=e.ref(),t=e.ref(""),r=e.ref(!1),s=()=>{let o=t.value.trim();if(o)return o=o.replaceAll("#",""),o=o.replaceAll("&",""),new Promise(((l,t)=>{r.value=!0,e.index.request({url:`https://111.229.39.132/video/info?url=${o}`,method:"GET",success:e=>{console.log("----------res------",e),200!==!e.statusCode?(a.value=e.data,console.log("info",a),l(e)):t(e.data)},fail:e=>{console.error("------err------",e),t(e)},complete:()=>{r.value=!1}})}));e.wx$1.showToast({icon:"error",title:"请输入"})},i=e.ref(),u=e.ref(),n=()=>{let o=t.value.trim();if(!o)return void e.wx$1.showToast({icon:"error",title:"请输入"});o=o.replaceAll("#",""),o=o.replaceAll("&","");let l=e.wx$1.env.USER_DATA_PATH+"/"+(new Date).valueOf()+".mp4";e.wx$1.downloadFile({url:"https://111.229.39.132/video/download?type="+u.value+"&url="+o,filePath:l,success(o){200===o.statusCode&&e.wx$1.saveVideoToPhotosAlbum({filePath:o.filePath,success(o){e.wx$1.hideLoading(),e.wx$1.showToast({icon:"success",title:"已保存到相册"})},fail(o){e.wx$1.hideLoading(),e.wx$1.showToast({icon:"error",title:"请重试"}),console.log("err",o)},complete:()=>{r.value=!0}})},fail:()=>{e.wx$1.hideLoading(),e.wx$1.showToast({icon:"error",title:"请重试"}),r.value=!0}})};return(o,l)=>{var d,c,v;return e.e({a:e.o(s),b:e.o((e=>t.value=e)),c:e.p({suffixIcon:"search",placeholder:"请输入分享地址",modelValue:t.value}),d:e.o((e=>s())),e:r.value,f:e.o((o=>(r.value=!1,e.wx$1.showLoading({title:"下载中"}),void e.index.request({url:"https://111.229.39.132/video/list",method:"GET",success:e=>{200===e.statusCode&&(i.value=e.data,u.value=e.data[0].value,n())},fail:o=>{r.value=!0,e.wx$1.hideLoading(),e.wx$1.showToast({icon:"error",title:"请重试"}),console.error("------err------",o)}})))),g:r.value,h:null==(d=a.value)?void 0:d.cover},(null==(c=a.value)?void 0:c.cover)?{i:a.value.cover}:{},{j:e.t(null==(v=a.value)?void 0:v.desc)})}}},l=e._export_sfc(o,[["__scopeId","data-v-9d698248"]]);wx.createPage(l);
